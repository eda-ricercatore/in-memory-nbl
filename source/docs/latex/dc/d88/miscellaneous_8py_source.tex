\hypertarget{miscellaneous_8py_source}{}\section{miscellaneous.\+py}
\label{miscellaneous_8py_source}\index{utilities/miscellaneous.\+py@{utilities/miscellaneous.\+py}}

\begin{DoxyCode}
\hypertarget{miscellaneous_8py_source_l00001}{}\hyperlink{namespaceutilities_1_1miscellaneous}{00001} \textcolor{comment}{#!/usr/local/bin/python3}
00002 \textcolor{comment}{###!/Users/zhiyang/anaconda3/bin/python3}
00003 
00004 \textcolor{stringliteral}{"""}
00005 \textcolor{stringliteral}{    This Python script is written by Zhiyang Ong to implement}
00006 \textcolor{stringliteral}{        miscellaneous tasks.}
00007 \textcolor{stringliteral}{    1) Add, commit, and push additions and updates to a Git repository.}
00008 \textcolor{stringliteral}{    2) ???}
00009 \textcolor{stringliteral}{}
00010 \textcolor{stringliteral}{    Synopsis:}
00011 \textcolor{stringliteral}{    Perform miscellaneous tasks.}
00012 \textcolor{stringliteral}{}
00013 \textcolor{stringliteral}{}
00014 \textcolor{stringliteral}{    #### IMPORTANT NOTES:}
00015 \textcolor{stringliteral}{    #### IMPORTANT ASSUMPTIONS:}
00016 \textcolor{stringliteral}{    A complete test suite for this Python module is not provided.}
00017 \textcolor{stringliteral}{    This is because it would require a Python interface to Git in order}
00018 \textcolor{stringliteral}{        to test if differences between the last build (or build *n*) and}
00019 \textcolor{stringliteral}{        the previous last build (or build *n*-1) have been committed and}
00020 \textcolor{stringliteral}{        pushed to the cloud-based Git repository.}
00021 \textcolor{stringliteral}{        It involves checking for file additions and deletions, and file}
00022 \textcolor{stringliteral}{            updates.}
00023 \textcolor{stringliteral}{    I cannot simply and quickly write a test suite for this, so I have}
00024 \textcolor{stringliteral}{        only tested this manually.}
00025 \textcolor{stringliteral}{}
00026 \textcolor{stringliteral}{}
00027 \textcolor{stringliteral}{    Revision History:}
00028 \textcolor{stringliteral}{    July 31, 2018           Version 0.1, initial build.}
00029 \textcolor{stringliteral}{"""}
00030 
\hypertarget{miscellaneous_8py_source_l00031}{}\hyperlink{namespaceutilities_1_1miscellaneous_a48adfde4ebd796df397b62ffacb0e3e3}{00031} \_\_author\_\_ = \textcolor{stringliteral}{'Zhiyang Ong'}
\hypertarget{miscellaneous_8py_source_l00032}{}\hyperlink{namespaceutilities_1_1miscellaneous_a05f25f703eec056b7c3387b0d5ee06c5}{00032} \_\_version\_\_ = \textcolor{stringliteral}{'1.0'}
\hypertarget{miscellaneous_8py_source_l00033}{}\hyperlink{namespaceutilities_1_1miscellaneous_aa0bfe4910c50f1be3cd69ebad7060965}{00033} \_\_date\_\_ = \textcolor{stringliteral}{'July 31, 2018'}
00034 
00035 \textcolor{comment}{#   The MIT License (MIT)}
00036 
00037 \textcolor{comment}{#   Copyright (c) <2018> <Zhiyang Ong>}
00038 
00039 \textcolor{comment}{#   Permission is hereby granted, free of charge, to any person obtaining a copy of this software and
       associated documentation files (the "Software"), to deal in the Software without restriction, including without
       limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the
       Software, and to permit persons to whom the Software is furnished to do so, subject to the following
       conditions:}
00040 
00041 \textcolor{comment}{#   The above copyright notice and this permission notice shall be included in all copies or substantial
       portions of the Software.}
00042 
00043 \textcolor{comment}{#   THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT
       LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO
       EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN
       ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE
       OR OTHER DEALINGS IN THE SOFTWARE.}
00044 
00045 \textcolor{comment}{#   Email address: echo "cukj -wb- 23wU4X5M589 TROJANS cqkH wiuz2y 0f Mw Stanford" | awk '\{
       sub("23wU4X5M589","F.d\_c\_b. ") sub("Stanford","d0mA1n"); print $5, $2, $8; for (i=1; i<=1; i++) print "6\(\backslash\)b"; print $9, $7,
       $6 \}' | sed y/kqcbuHwM62z/gnotrzadqmC/ | tr 'q' ' ' | tr -d [:cntrl:] | tr -d 'ir' | tr y "\(\backslash\)n"   Che cosa
       significa?}
00046 
00047 
00048 
00049 \textcolor{comment}{###############################################################}
00050 \textcolor{stringliteral}{"""}
00051 \textcolor{stringliteral}{    Import modules from The Python Standard Library.}
00052 \textcolor{stringliteral}{    sys         Get access to any command-line arguments.}
00053 \textcolor{stringliteral}{    os          Use any operating system dependent functionality.}
00054 \textcolor{stringliteral}{    os.path     For pathname manipulations.}
00055 \textcolor{stringliteral}{}
00056 \textcolor{stringliteral}{    subprocess -> call}
00057 \textcolor{stringliteral}{                To make system calls.}
00058 \textcolor{stringliteral}{}
00059 \textcolor{stringliteral}{    time        To measure elapsed time.}
00060 \textcolor{stringliteral}{    warnings    Raise warnings.}
00061 \textcolor{stringliteral}{    re          Use regular expressions.}
00062 \textcolor{stringliteral}{    calendar    For checking if given year is a leap year.}
00063 \textcolor{stringliteral}{"""}
00064 
00065 \textcolor{keyword}{import} sys
00066 \textcolor{comment}{#import os}
00067 \textcolor{keyword}{import} os.path
00068 \textcolor{comment}{#from subprocess import call}
00069 \textcolor{keyword}{import} subprocess
00070 \textcolor{comment}{#import time}
00071 \textcolor{keyword}{import} warnings
00072 \textcolor{comment}{#import re}
00073 \textcolor{keyword}{import} calendar
00074 \textcolor{keyword}{from} calendar \textcolor{keyword}{import} month\_name
00075 
00076 \textcolor{comment}{###############################################################}
00077 \textcolor{comment}{#   Import Custom Python Modules}
00078 
00079 \textcolor{stringliteral}{"""}
00080 \textcolor{stringliteral}{    Package and module to configure the software application's}
00081 \textcolor{stringliteral}{        parameters.}
00082 \textcolor{stringliteral}{"""}
00083 \textcolor{keyword}{from} \hyperlink{namespaceutilities_1_1configuration__manager}{utilities.configuration\_manager} \textcolor{keyword}{import} config\_manager
00084 \textcolor{comment}{# Package and module to generate filename with time stamp.}
00085 \textcolor{comment}{#from utilities.generate\_results\_filename import generate\_filename}
00086 \textcolor{stringliteral}{"""}
00087 \textcolor{stringliteral}{    Module to test if the generated filename (based on the}
00088 \textcolor{stringliteral}{        then-current time stamp) conforms to the specified}
00089 \textcolor{stringliteral}{        format.}
00090 \textcolor{stringliteral}{"""}
00091 \textcolor{keyword}{from} \hyperlink{namespaceutilities_1_1generate__results__filename__tester}{utilities.generate\_results\_filename\_tester} \textcolor{keyword}{import} 
      generate\_filename\_tester
00092 
00093 \textcolor{comment}{###############################################################}
00094 \textcolor{comment}{##  Module with methods that perform miscellaneous tasks.}
\hypertarget{miscellaneous_8py_source_l00095}{}\hyperlink{classutilities_1_1miscellaneous_1_1misc}{00095} \textcolor{keyword}{class }\hyperlink{classutilities_1_1miscellaneous_1_1misc}{misc}:
\hypertarget{miscellaneous_8py_source_l00096}{}\hyperlink{classutilities_1_1miscellaneous_1_1misc_a27fd16369fd0995d7494ff4741de5b91}{00096}     absolute\_path\_to\_store\_results = \textcolor{stringliteral}{"
      /Users/zhiyang/Documents/ricerca/risultati\_sperimentali/std-cell-library-characterization"}
00097     \textcolor{comment}{# ============================================================}
00098     \textcolor{comment}{##  Method to get the absolute path to store results.}
00099     \textcolor{comment}{#   It is an accessor method.}
00100     \textcolor{comment}{#   @param - Nothing.}
00101     \textcolor{comment}{#   @return the absolute path to store results.}
00102     \textcolor{comment}{#   O(1) method.}
00103     @staticmethod
\hypertarget{miscellaneous_8py_source_l00104}{}\hyperlink{classutilities_1_1miscellaneous_1_1misc_a17714d8ce76a7c4f04256b37b9938c15}{00104}     \textcolor{keyword}{def }\hyperlink{classutilities_1_1miscellaneous_1_1misc_a17714d8ce76a7c4f04256b37b9938c15}{get\_absolute\_path\_to\_store\_results}():
00105         \textcolor{keywordflow}{return} misc.absolute\_path\_to\_store\_results
00106     \textcolor{comment}{# ============================================================}
00107     \textcolor{comment}{##  Method to validate the absolute path to store results.}
00108     \textcolor{comment}{#   It is an query method}
00109     \textcolor{comment}{#   @param path\_to\_file - A path to store the results file.}
00110     \textcolor{comment}{#   @param filename - A filename.}
00111     \textcolor{comment}{#   @return boolean True, if the path to the desired location can}
00112     \textcolor{comment}{#       be contains the value in "misc.absolute\_path\_to\_store\_results"}
00113     \textcolor{comment}{#       and the filename of the results file.}
00114     \textcolor{comment}{#       Else, return boolean False.}
00115     \textcolor{comment}{#   O(1) method.}
00116     @staticmethod
\hypertarget{miscellaneous_8py_source_l00117}{}\hyperlink{classutilities_1_1miscellaneous_1_1misc_a9b5ff2b3036d8a1a2e3bacb1d25e2785}{00117}     \textcolor{keyword}{def }\hyperlink{classutilities_1_1miscellaneous_1_1misc_a9b5ff2b3036d8a1a2e3bacb1d25e2785}{check\_absolute\_path\_to\_store\_results}(path\_to\_file,filename):
00118         \textcolor{keywordflow}{if} path\_to\_file.find(filename):
00119             \textcolor{keywordflow}{return} \textcolor{keyword}{True}
00120         \textcolor{keywordflow}{else}:
00121             \textcolor{keywordflow}{return} \textcolor{keyword}{False}
00122     \textcolor{comment}{# ============================================================}
00123     \textcolor{comment}{##  Method to determine if a filename has the DD-MM-YY-HH-MM-SS-uS.txt}
00124     \textcolor{comment}{#       format.}
00125     \textcolor{comment}{#   @param filename - A filename.}
00126     \textcolor{comment}{#   @return boolean True if the path to the desired location can}
00127     \textcolor{comment}{#       be found;}
00128     \textcolor{comment}{#       Else, return boolean False.}
00129     \textcolor{comment}{#   O(1) method.}
00130     @staticmethod
\hypertarget{miscellaneous_8py_source_l00131}{}\hyperlink{classutilities_1_1miscellaneous_1_1misc_a96b7b4aa054c6c8eb7571314ec8edbc7}{00131}     \textcolor{keyword}{def }\hyperlink{classutilities_1_1miscellaneous_1_1misc_a96b7b4aa054c6c8eb7571314ec8edbc7}{check\_filename\_format}(filename):
00132         filename\_wo\_extn, file\_extn = os.path.splitext(filename)
00133         \textcolor{keywordflow}{if} \textcolor{stringliteral}{".txt"} != file\_extn:
00134             \textcolor{keywordflow}{return} \textcolor{keyword}{False}
00135         tokens = filename\_wo\_extn.split(\textcolor{stringliteral}{"-"})
00136         \textcolor{stringliteral}{"""}
00137 \textcolor{stringliteral}{            Check against the format: DD-MM-YY-HH-MM-SS-uS[.txt].}
00138 \textcolor{stringliteral}{            tokens[0] = DD/Day}
00139 \textcolor{stringliteral}{            tokens[1] = MM/Month}
00140 \textcolor{stringliteral}{            tokens[2] = YY/Year}
00141 \textcolor{stringliteral}{            tokens[3] = HH/Hour}
00142 \textcolor{stringliteral}{            tokens[4] = MM/Minute}
00143 \textcolor{stringliteral}{            tokens[5] = [SS/Second]}
00144 \textcolor{stringliteral}{            tokens[6] = [uS/Microsecond]}
00145 \textcolor{stringliteral}{        """}
00146         \textcolor{keywordflow}{if} 7 != len(tokens):
00147             \textcolor{keywordflow}{return} \textcolor{keyword}{False}
00148         \textcolor{keywordflow}{if} 1 > int(tokens[0]):
00149             \textcolor{keywordflow}{return} \textcolor{keyword}{False}
00150         \textcolor{keywordflow}{if} 2 == int(tokens[1]) \textcolor{keywordflow}{and} 29 < int(tokens[0]) \textcolor{keywordflow}{and} calendar.isleap(int(tokens[2])):
00151             \textcolor{keywordflow}{return} \textcolor{keyword}{False}
00152         \textcolor{keywordflow}{if} 2 == int(tokens[1]) \textcolor{keywordflow}{and} 28 < int(tokens[0]) \textcolor{keywordflow}{and} \textcolor{keywordflow}{not} calendar.isleap(int(tokens[2])):
00153             \textcolor{keywordflow}{return} \textcolor{keyword}{False}
00154         \textcolor{keywordflow}{if} generate\_filename\_tester.is\_30\_day\_month(tokens[1]) \textcolor{keywordflow}{and} 30 < int(tokens[0]):
00155             \textcolor{keywordflow}{return} \textcolor{keyword}{False}
00156         \textcolor{keywordflow}{if} generate\_filename\_tester.is\_31\_day\_month(tokens[1]) \textcolor{keywordflow}{and} 31 < int(tokens[0]):
00157             \textcolor{keywordflow}{return} \textcolor{keyword}{False}
00158         \textcolor{keywordflow}{if} 1 > int(tokens[1]):
00159             \textcolor{keywordflow}{return} \textcolor{keyword}{False}
00160         \textcolor{keywordflow}{if} 12 < int(tokens[1]):
00161             \textcolor{keywordflow}{return} \textcolor{keyword}{False}
00162         \textcolor{keywordflow}{if} 2000 > int(tokens[2]):
00163             \textcolor{keywordflow}{return} \textcolor{keyword}{False}
00164         \textcolor{keywordflow}{if} 0 > int(tokens[3]):
00165             \textcolor{keywordflow}{return} \textcolor{keyword}{False}
00166         \textcolor{keywordflow}{if} 23 < int(tokens[3]):
00167             \textcolor{keywordflow}{return} \textcolor{keyword}{False}
00168         \textcolor{keywordflow}{if} 0 > int(tokens[4]):
00169             \textcolor{keywordflow}{return} \textcolor{keyword}{False}
00170         \textcolor{keywordflow}{if} 59 < int(tokens[4]):
00171             \textcolor{keywordflow}{return} \textcolor{keyword}{False}
00172         \textcolor{keywordflow}{if} 0 > int(tokens[5]):
00173             \textcolor{keywordflow}{return} \textcolor{keyword}{False}
00174         \textcolor{keywordflow}{if} 59 < int(tokens[5]):
00175             \textcolor{keywordflow}{return} \textcolor{keyword}{False}
00176         \textcolor{keywordflow}{if} 0 > int(tokens[6]):
00177             \textcolor{keywordflow}{return} \textcolor{keyword}{False}
00178         \textcolor{keywordflow}{if} 999999 < int(tokens[6]):
00179             \textcolor{keywordflow}{return} \textcolor{keyword}{False}
00180         \textcolor{keywordflow}{return} \textcolor{keyword}{True}
00181     \textcolor{comment}{# ============================================================}
00182     \textcolor{comment}{##  Method to determine where to store the results of the}
00183     \textcolor{comment}{#       experimental, simulation, verification, or testing runs}
00184     \textcolor{comment}{#   @param filename - A filename that has the DD-MM-YY-HH-MM-SS-uS.txt.}
00185     \textcolor{comment}{#   @return a string representing the absolute path of the location.}
00186     \textcolor{comment}{#   O(1) method.}
00187     @staticmethod
\hypertarget{miscellaneous_8py_source_l00188}{}\hyperlink{classutilities_1_1miscellaneous_1_1misc_ab675e34a1a463f5a6aac272debe372ae}{00188}     \textcolor{keyword}{def }\hyperlink{classutilities_1_1miscellaneous_1_1misc_ab675e34a1a463f5a6aac272debe372ae}{find\_desired\_location\_for\_results}(filename):
00189         \textcolor{comment}{# Does filename have the DD-MM-YY-HH-MM-SS-uS.txt format?}
00190         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} misc.check\_filename\_format(filename):
00191             \textcolor{keywordflow}{return} \textcolor{stringliteral}{"'filename' needs to have the format: DD-MM-YY-HH-MM-SS-uS.txt."}
00192         \textcolor{comment}{# Remove file extension, and tokenize the filename.}
00193         filename\_wo\_extn, file\_extn = os.path.splitext(filename)
00194         tokens = filename\_wo\_extn.split(\textcolor{stringliteral}{"-"})
00195         \textcolor{stringliteral}{"""}
00196 \textcolor{stringliteral}{            In the repository to store results from experiments,}
00197 \textcolor{stringliteral}{                simulations, and verification runs, and testing runs,}
00198 \textcolor{stringliteral}{                classify the files by subdirectories according to year}
00199 \textcolor{stringliteral}{                first before the month.}
00200 \textcolor{stringliteral}{        """}
00201         \textcolor{comment}{# Does a directory for the specified year exists?}
00202         path\_to\_results\_file = misc.get\_absolute\_path\_to\_store\_results() +  \textcolor{stringliteral}{"/"} + tokens[2]
00203         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} os.path.isdir(path\_to\_results\_file):
00204             \textcolor{comment}{# Creat the directory for the specified year.}
00205             os.mkdir(path\_to\_results\_file)
00206         \textcolor{comment}{# Does a directory for the specified month exists?}
00207         path\_to\_results\_file = path\_to\_results\_file + \textcolor{stringliteral}{"/"} + month\_name[int(tokens[1])].lower()
00208         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} os.path.isdir(path\_to\_results\_file):
00209             \textcolor{comment}{# Creat the directory for the specified month.}
00210             os.mkdir(path\_to\_results\_file)
00211         path\_to\_results\_file = path\_to\_results\_file + \textcolor{stringliteral}{"/"} + filename
00212         \textcolor{comment}{#print("path\_to\_results\_file:",path\_to\_results\_file,"=")}
00213         \textcolor{keywordflow}{return} path\_to\_results\_file
00214     \textcolor{comment}{# ============================================================}
00215     \textcolor{comment}{##  Method to store the results file in the specified absolute path.}
00216     \textcolor{comment}{#   @param path\_to\_file - A path to store the results file.}
00217     \textcolor{comment}{#   @return a file object for the results file.}
00218     \textcolor{comment}{#   O(1) method.}
00219     @staticmethod
\hypertarget{miscellaneous_8py_source_l00220}{}\hyperlink{classutilities_1_1miscellaneous_1_1misc_ad364ae88435c58955e26fcc22b1cabb9}{00220}     \textcolor{keyword}{def }\hyperlink{classutilities_1_1miscellaneous_1_1misc_ad364ae88435c58955e26fcc22b1cabb9}{store\_results}(path\_to\_file):
00221         \textcolor{keywordflow}{if} path\_to\_file \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:
00222             \textcolor{keywordflow}{return} open(path\_to\_file, \textcolor{stringliteral}{'w+'})
00223         \textcolor{keywordflow}{else}:
00224             \textcolor{keywordflow}{return} \textcolor{keywordtype}{None}
00225     \textcolor{comment}{# ============================================================}
00226     \textcolor{comment}{##  Method to add, commit, and push additions and updates}
00227     \textcolor{comment}{#       to a Git repository.}
00228     \textcolor{comment}{#   @param comment - A comment for this commit/build [to the}
00229     \textcolor{comment}{#                       repository].}
00230     \textcolor{comment}{#   @return boolean True if updates can be added, committed,}
00231     \textcolor{comment}{#       and push additions to a Git repository;}
00232     \textcolor{comment}{#       Else, return boolean False.}
00233     \textcolor{comment}{#   O(1) method.}
00234     @staticmethod
\hypertarget{miscellaneous_8py_source_l00235}{}\hyperlink{classutilities_1_1miscellaneous_1_1misc_a7837597eba06ec38b69b931ec18e39eb}{00235}     \textcolor{keyword}{def }\hyperlink{classutilities_1_1miscellaneous_1_1misc_a7837597eba06ec38b69b931ec18e39eb}{add\_commit\_push\_updates\_to\_git\_repository}(comment):
00236         \textcolor{keywordflow}{try}:
00237             print(\textcolor{stringliteral}{"-------------------------------------------------"})
00238             cmd = [\textcolor{stringliteral}{'git'}, \textcolor{stringliteral}{'add'}, \textcolor{stringliteral}{"-A"}]
00239             p = subprocess.Popen(cmd, cwd=config\_manager.result\_repository)
00240             \textcolor{comment}{#p = subprocess.call(cmd, cwd=config\_manager.result\_repository)}
00241             print(\textcolor{stringliteral}{"-    Added. Commit now."})
00242             comment = \textcolor{stringliteral}{"Update build via Python."}
00243             cmd = [\textcolor{stringliteral}{"git"}, \textcolor{stringliteral}{"commit"}, \textcolor{stringliteral}{"-m"}, comment]
00244             p = subprocess.Popen(cmd, cwd=config\_manager.result\_repository)
00245             p.wait()
00246             print(\textcolor{stringliteral}{"-    Committed. Push now."})
00247             cmd = [\textcolor{stringliteral}{"git"}, \textcolor{stringliteral}{"push"}]
00248             p = subprocess.Popen(cmd, cwd=config\_manager.result\_repository)
00249             p.wait()
00250             print(\textcolor{stringliteral}{"-------------------------------------------------"})
00251             \textcolor{keywordflow}{return} \textcolor{keyword}{True}
00252         \textcolor{keywordflow}{except}:
00253             \textcolor{keywordflow}{return} \textcolor{keyword}{False}
\end{DoxyCode}
